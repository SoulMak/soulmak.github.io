<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Windowsä¸‹æ­å»ºCA by SoulMak</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/SoulMak">View On GitHub</a></li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>Windowsä¸‹æ­å»ºCA</h1>
          <p>2014å¹´9æœˆ17æ—¥</p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/SoulMak">SoulMak</a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a></span>
        </div>

        <h2>
<a name="%E5%89%8D%E8%A8%80" class="anchor" href="#%E5%89%8D%E8%A8%80"><span class="octicon octicon-link"></span></a>å‰è¨€</h2>

<p>æœ¬æ–‡æŠ€æœ¯æ¥æºäºã€ŠJavaåŠ å¯†ä¸è§£å¯†çš„è‰ºæœ¯ã€‹ä¸€ä¹¦ï¼Œå¯¹äºæœ¬æ–‡çœ‹çš„ä¸æ˜¯å¾ˆæ˜ç™½çš„å¯ä»¥æŸ¥é˜…è¯¥ä¹¦</p>

<h2>
<a name="%E5%87%86%E5%A4%87" class="anchor" href="#%E5%87%86%E5%A4%87"><span class="octicon octicon-link"></span></a>å‡†å¤‡</h2>

<p>åœ¨<a href="http://slproweb.com/products/Win32OpenSSL.html">http://slproweb.com/products/Win32OpenSSL.html</a>é¡µé¢ä¸‹ä¸‹è½½æœ€æ–°çš„Windowsç‰ˆOpenSSLã€‚è¿™é‡Œé€‰ç”¨<code>Win64 OpenSSL v1.0.1i Light</code>æ¼”ç¤ºæ•°å­—è¯ä¹¦æ„å»ºç›¸å…³æ“ä½œ</p>

<h3>
<a name="%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F" class="anchor" href="#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="octicon octicon-link"></span></a>ç¯å¢ƒå˜é‡</h3>

<p>è®¾ç½®ç³»ç»Ÿå˜é‡<code>OpenSSL_Home</code>ï¼Œå¹¶å°†å…¶æŒ‡å‘ä½ çš„å®‰è£…ç›®å½•(<code>C:\OpenSSL</code>)ã€‚åŒæ—¶è®¾ç½®å…¶æ‰§è¡Œç›®å½•(<code>%OpenSSL_Home%\bin;</code>)åŠ å…¥ç³»ç»Ÿå˜é‡<code>Path</code>ä¸­ã€‚å¦‚ä¸‹ï¼š</p>

<pre><code>ï¼ƒOpenSSLç³»ç»Ÿå˜é‡é…ç½®

OpenSSL_Home    C:\OpenSSL
Path            %OpenSSL_Home%\bin
</code></pre>

<p>å®Œæˆä¸Šè¿°æ“ä½œåï¼Œåœ¨å‘½ä»¤è¡Œæ‰§è¡Œ<code>OpenSSL</code>å‘½ä»¤ï¼Œå¦‚ä¸‹ï¼š</p>

<pre><code>ï¼ƒOpenSSLå‘½ä»¤è¡Œæ“ä½œ

C:\User\itan.feng&gt;openssl
OpenSSL&gt;_
</code></pre>

<h3>
<a name="%E5%B7%A5%E4%BD%9C%E7%9B%AE%E5%BD%95" class="anchor" href="#%E5%B7%A5%E4%BD%9C%E7%9B%AE%E5%BD%95"><span class="octicon octicon-link"></span></a>å·¥ä½œç›®å½•</h3>

<p>å¤§å®¶OpenSSLé…ç½®æ–‡ä»¶openssl.cfg(<code>%OpenSSL_Home%\bin\opensssl.cfg</code>)ï¼Œæ‰¾åˆ°é…ç½®<code>[CA_default]</code>ï¼Œå¦‚ä¸‹ï¼š</p>

<pre><code>ï¼ƒOpenSSLåˆå§‹é…ç½®

####################################################################
[ CA_default ]

dir             = ./demoCA         # Where everything is kept
certs           = $dir/certs       # Where the issued certs are kept
crl_dir         = $dir/crl         # Where the issued crl are kept
database        = $dir/index.txt   # database index file.
#unique_subject = no               # Set to 'no' to allow creation of
                                   # several ctificates with same subject.
new_certs_dir   = $dir/newcerts    # default place for new certs.

certificate     = $dir/cacert.pem  # The CA certificate
</code></pre>

<p>æ³¨æ„å˜é‡<code>dir</code>ï¼Œå®ƒæŒ‡å‘çš„æ˜¯CAçš„å·¥ä½œç›®å½•ï¼Œæœ¬æ–‡å°†è·¯å¾„æŒ‡å‘<code>C:/ca</code>ä½œä¸ºå·¥ä½œç›®å½•ï¼Œå¯¹å˜é‡diråšç›¸åº”çš„ä¿®æ”¹ã€‚å¯¹äºå…¶ä»–å˜é‡ï¼Œæˆ‘ä»¬æ— éœ€ä¿®æ”¹ã€‚<br>
å¦‚æœä¸æ–¹ä¾¿ä¿®æ”¹OpenSSLé»˜è®¤é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®å˜é‡<code>â€œOPENSSL_CONFâ€</code>æŒ‡å®šé…ç½®æ–‡ä»¶è·¯å¾„ã€‚å¦‚ä¸‹ï¼š</p>

<pre><code>ï¼ƒå‘½ä»¤æŒ‡å®šé…ç½®æ–‡ä»¶è·¯å¾„

set OPENSSL_CONF = C:\openssl.cfg
</code></pre>

<p>è‹¥è¯¥æ–¹æ³•æ— æ³•è®¾ç½®æˆåŠŸè¯·è‡ªå·±åˆ°ç³»ç»Ÿå˜é‡ä¸­è¿›è¡Œè®¾ç½®</p>

<pre><code>ï¼ƒç³»ç»Ÿå˜é‡è‡ªå®šé…ç½®æ–‡ä»¶è·¯å¾„

OPENSSL_CONF = C:\openssl.cfg
</code></pre>

<p>å»ºç«‹CAå·¥ä½œç›®å½•åï¼Œæˆ‘ä»¬éœ€è¦æ„å»ºä¸€äº›å­ç›®å½•ï¼Œç”¨äºå­˜æ”¾è¯ä¹¦ã€å¯†é’¥ç­‰ã€‚å®Œæ•´å‘½ä»¤ä»£ç æ¸…å•å¦‚ä¸‹ï¼š</p>

<pre><code>ï¼ƒæ„å»ºCAå­ç›®å½•

echo  æ„å»ºå·²å‘è¡Œè¯ä¹¦å­˜æ”¾ç›®å½•  certs
mkdir certs
echo  æ„å»ºæ–°è¯ä¹¦å­˜æ”¾ç›®å½• newcerts
mkdir newcerts
echo  æ„å»ºç§é’¥å­˜æ”¾ç›®å½•  private
mkdir private
echo  æ„å»ºè¯ä¹¦åŠé”€åˆ—è¡¨å­˜æ”¾ç›®å½• crl
mkdir crl
</code></pre>

<p>æˆ‘ä»¬å°†åœ¨åˆ›å»ºè¯ä¹¦æ—¶ç”¨åˆ°ä¸Šè¿°ç›®å½•ï¼Œæœ€ç»ˆåœ¨certsç›®å½•ä¸­è·å¾—è¯ä¹¦æ–‡ä»¶ã€‚<br>
æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦æ„å»ºä¸€äº›æ–‡ä»¶ï¼Œå®Œæ•´å‘½ä»¤ä»£ç æ¸…å•å¦‚ä¸‹ï¼š</p>

<pre><code>ï¼ƒæ„å»ºç›¸å…³æ–‡ä»¶

echo  æ„å»ºç´¢å¼•æ–‡ä»¶ index.txt
echo  0&gt;index.txt
echo  æ„å»ºåºåˆ—å·æ–‡ä»¶ serial
echo  01&gt;serial
</code></pre>

<p>å®Œæˆä¸Šè¿°æ“ä½œåï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿›è¡Œè¯ä¹¦çš„æ„å»ºå’Œç­¾å‘å·¥ä½œäº†ã€‚</p>

<h2>
<a name="%E6%9E%84%E5%BB%BA%E6%A0%B9%E8%AF%81%E4%B9%A6" class="anchor" href="#%E6%9E%84%E5%BB%BA%E6%A0%B9%E8%AF%81%E4%B9%A6"><span class="octicon octicon-link"></span></a>æ„å»ºæ ¹è¯ä¹¦</h2>

<h3>
<a name="%E6%9E%84%E5%BB%BA%E9%9A%8F%E6%9C%BA%E6%95%B0%E6%96%87%E4%BB%B6" class="anchor" href="#%E6%9E%84%E5%BB%BA%E9%9A%8F%E6%9C%BA%E6%95%B0%E6%96%87%E4%BB%B6"><span class="octicon octicon-link"></span></a>æ„å»ºéšæœºæ•°æ–‡ä»¶</h3>

<p>åœ¨æ„æ ¹è¯ä¹¦ä¹‹å‰ï¼Œéœ€è¦æ„å»ºéšæœºæ•°æ–‡ä»¶ï¼ˆ<code>.rand</code>ï¼‰ï¼Œå®Œæ•´å‘½ä»¤ä»£ç æ¸…å•å¦‚ä¸‹ï¼š</p>

<pre><code>ï¼ƒæ„å»ºéšæœºæ•°å‘½ä»¤

openssl rand -out private/.rand 1000
</code></pre>

<p>å„å‚æ•°çš„å«ä¹‰å¦‚ä¸‹ï¼š<br>
rand     éšæœºæ•°å‘½ä»¤<br>
-out     è¾“å‡ºæ–‡ä»¶è·¯å¾„ï¼Œè¿™é‡Œå°†éšæœºæ•°æ–‡ä»¶è¾“å‡ºåˆ°privateç›®å½•ä¸‹ã€‚<br>
è¿™é‡Œçš„1000ï¼Œåªç”¨æ¥äº§ç”Ÿä¼ªéšæœºå­—èŠ‚æ•°ã€‚<br>
ä¸Šè¿°å‘½ä»¤æ‰§è¡Œç»“æœå¦‚ä¸‹</p>

<pre><code>ï¼ƒæ„å»ºéšæœºæ•°æ–‡ä»¶

Loading 'screen' into random state - done
</code></pre>

<p>æ³¨æ„å¦‚æœåœ¨windows7ä¸­æœªèƒ½ä½¿ç”¨ç®¡ç†å‘˜æƒé™æ‰§è¡Œä¸Šè¿°å‘½ä»¤ï¼Œå°†æ— æ³•åˆ›å»ºéšæœºæ•°æ–‡ä»¶ï¼Œå¦‚ä¸‹</p>

<pre><code>ï¼ƒæ„å»ºéšæœºæ•°æ–‡ä»¶å¤±è´¥

Loading 'screen' into random state - done
unable to write 'random state'
</code></pre>

<h3>
<a name="%E7%94%9F%E6%88%90-ca-%E8%AF%81%E4%B9%A6%E7%9A%84-rsa-%E5%AF%86%E9%92%A5%E5%AF%B9" class="anchor" href="#%E7%94%9F%E6%88%90-ca-%E8%AF%81%E4%B9%A6%E7%9A%84-rsa-%E5%AF%86%E9%92%A5%E5%AF%B9"><span class="octicon octicon-link"></span></a>ç”Ÿæˆ CA è¯ä¹¦çš„ RSA å¯†é’¥å¯¹</h3>

<p>OpenSSLé€šå¸¸ä½¿ç”¨PEMï¼ˆPrivacy Enbanced Mailï¼Œéšç§å¢å¼ºé‚®ä»¶ï¼‰ç¼–ç æ ¼å¼ä¿å­˜ç§é’¥ã€‚<br>
æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦æ„å»ºæ ¹è¯ä¹¦å¯†é’¥ï¼ˆ<code>ca.key.pem</code>ï¼‰ï¼Œå®Œæ•´å‘½ä»¤ä»£ç æ¸…å•å¦‚ä¸‹ï¼š</p>

<pre><code>ï¼ƒæ„å»ºæ ¹è¯ä¹¦ç§é’¥å‘½ä»¤

openssl genrsa -aes256 -out private/ca.key.pem 2048
</code></pre>

<p>å„å‚æ•°çš„å«ä¹‰å¦‚ä¸‹ï¼š  </p>

<pre><code>genrsa      äº§ç”ŸRSAå¯†é’¥å‘½ä»¤
-aes256     ä½¿ç”¨AESç®—æ³•ï¼ˆ256ä½å¯†é’¥ï¼‰å¯¹äº§ç”Ÿçš„ç§é’¥åŠ å¯†ã€‚å¯é€‰ç®—æ³•åŒ…æ‹¬DESã€DESedeã€IDEAå’ŒAESã€‚
-out        è¾“å‡ºè·¯å¾„ï¼Œè¿™é‡ŒæŒ‡private/ca.key.pemã€‚
</code></pre>

<p>è¿™é‡Œçš„2048ï¼ŒæŒ‡å¯†é’¥é•¿åº¦ä½æ•°ï¼Œé»˜è®¤é•¿åº¦ä¸º512ä¸ºã€‚<br>
ä¸Šè¿°å‘½ä»¤æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p>

<pre><code>ï¼ƒæ„å»ºæ ¹è¯ä¹¦ç§é’¥

Loading 'screen' into random state - done
Generating RSA private key, 2048 bit long modulus
.....................................+++
...+++
e is 65537 (0x10001)
Enter pass phrase for private/ca.key.pem:
Verifying - Enter pass phrase for private/ca.key.pem:
</code></pre>

<p>è¿™æ—¶æˆ‘ä»¬éœ€è¦è¾“å…¥æ ¹è¯ä¹¦å¯†ç <code>â€œwww.aios.comâ€</code>  </p>

<h3>
<a name="%E7%94%9F%E6%88%90-ca-%E8%AF%81%E4%B9%A6%E8%AF%B7%E6%B1%82" class="anchor" href="#%E7%94%9F%E6%88%90-ca-%E8%AF%81%E4%B9%A6%E8%AF%B7%E6%B1%82"><span class="octicon octicon-link"></span></a>ç”Ÿæˆ CA è¯ä¹¦è¯·æ±‚</h3>

<p>å®Œæˆå¯†é’¥çš„æ„å»ºæ“ä½œåï¼Œæˆ‘ä»¬éœ€è¦ç”Ÿæˆæ ¹è¯ä¹¦ç­¾å‘çš„ç”³è¯·æ–‡ä»¶ï¼ˆ<code>ca.csr</code>ï¼‰ï¼Œå®Œæ•´å‘½ä»¤ä»£ç æ¸…å•å¦‚ä¸‹ï¼š</p>

<pre><code>ï¼ƒç”Ÿæˆæ ¹è¯ä¹¦ç­¾å‘å¾—ç”³è¯·å‘½ä»¤

openssl req -new -key private/ca.key.pem -out private/ca.csr
</code></pre>

<p>å„å‚æ•°çš„å«ä¹‰å¦‚ä¸‹ï¼š</p>

<pre><code>req     äº§ç”Ÿè¯ä¹¦ç­¾å‘ç”³è¯·å‘½ä»¤      
-new    äº§ç”Ÿæ–°è¯·æ±‚
-key    å¯†é’¥ï¼Œè¿™é‡Œä¸ºprivate/ca.key.pemæ–‡ä»¶
-out    è¾“å‡ºè·¯å¾„ï¼Œè¿™é‡Œä¸ºprivate/ca.csræ–‡ä»¶
</code></pre>

<p>ä¸Šè¿°å‘½ä»¤æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p>

<pre><code>#ç”Ÿæˆæ ¹è¯ä¹¦ç­¾å‘ç”³è¯·

Enter pass phrase for private/ca.key.pem:
Loading 'screen' into random state - done
You are about to be asked to enter information that will be incorporated into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter '.', the field will be left blank.
-----
Country Name (2 letter code) [AU]:CN
State or Province Name (full name) [Some-State]:BJ
Locality Name (eg, city) []:BJ
Organization Name (eg, company) [Internet Widgits Pty Ltd]:Tech.Settion
Organizational Unit Name (eg, section) []:AIOS Inc.
Common Name (e.g. server FQDN or YOUR name) []:Insight RootCA
Email Address []:

Please enter the following 'extra' attributes
to be sent with your certificate request
A challenge password []:
An optional company name []:
</code></pre>

<p>è¿™æ—¶æˆ‘ä»¬éœ€è¦è¾“å…¥æ ¹è¯ä¹¦å¯†ç å¹¶å¡«å†™è¯ä¹¦ç›¸å…³ä¿¡æ¯å­—æ®µ </p>

<h3>
<a name="%E5%AF%B9-ca-%E8%AF%81%E4%B9%A6%E8%AF%B7%E6%B1%82%E8%BF%9B%E8%A1%8C%E7%AD%BE%E5%90%8D" class="anchor" href="#%E5%AF%B9-ca-%E8%AF%81%E4%B9%A6%E8%AF%B7%E6%B1%82%E8%BF%9B%E8%A1%8C%E7%AD%BE%E5%90%8D"><span class="octicon octicon-link"></span></a>å¯¹ CA è¯ä¹¦è¯·æ±‚è¿›è¡Œç­¾å</h3>

<p>å¾—åˆ°æ ¹è¯ä¹¦ç­¾å‘ç”³è¯·æ–‡ä»¶åï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶å‘é€ç»™CAæœºæ„ç­¾å‘ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªè¡Œç­¾å‘æ ¹è¯ä¹¦ã€‚ç­¾å‘æ ¹è¯ä¹¦å®Œæ•´å‘½ä»¤æ¸…å•å¦‚ä¸‹ï¼š</p>

<pre><code>ï¼ƒç­¾å‘æ ¹è¯ä¹¦å‘½ä»¤

openssl x509 -req -days 10000 -sha1 -extensions v3_ca -signkey private/ca.key.pem -in private/ca.csr -out certs/ca.cer
</code></pre>

<p>å„å‚æ•°çš„å«ä¹‰å¦‚ä¸‹ï¼š</p>

<pre><code>x509            ç­¾å‘X.509æ ¼å¼è¯ä¹¦å‘½ä»¤ã€‚
-req            è¯ä¹¦è¾“å…¥è¯·æ±‚ã€‚
-days           ğŸˆ¶æ•ˆå¤©æ•°ï¼Œè¿™é‡Œä¸º10000å¤©
-sha1           è¯ä¹¦æ‘˜è¦ç®—æ³•ï¼Œè¿™é‡Œä¸ºSHA1ç®—æ³•
-extensions     æŒ‰OpenSSLé…ç½®æ–‡ä»¶v3_caé¡¹æ·»åŠ æ‰©å±•
-signkey        è‡ªç­¾åå¯†é’¥ï¼Œè¿™é‡Œä¸ºprivate/ca.key.pem
-in             è¾“å…¥æ–‡ä»¶ï¼Œè¿™é‡Œä¸ºprivate/ca.csr
-out            è¾“å‡ºæ–‡ä»¶ï¼Œè¿™é‡Œä¸ºcerts/ca.csr
</code></pre>

<p>ä¸Šè¿°å‘½ä»¤æ‰§è¡Œç»“æœï¼Œå¦‚ä¸‹ï¼š</p>

<pre><code>#ç­¾å‘æ ¹è¯ä¹¦

Loading 'screen' into random state - done
Signature ok
subject=/C=CN/ST=BJ/L=BJ/O=Tech.Settion/OU=AIOS Inc./CN=Insight RootCA
Getting Private key
Enter pass phrase for private/ca.key.pem:
</code></pre>

<p>è¿™æ—¶æˆ‘ä»¬éœ€è¦è¾“å…¥æ ¹è¯ä¹¦å¯†ç <code>â€œwww.aios.comâ€</code></p>

<h3>
<a name="%E5%AF%B9-ca%E8%AF%81%E4%B9%A6-%E8%BF%9B%E8%A1%8C%E8%BD%AC%E6%8D%A2" class="anchor" href="#%E5%AF%B9-ca%E8%AF%81%E4%B9%A6-%E8%BF%9B%E8%A1%8C%E8%BD%AC%E6%8D%A2"><span class="octicon octicon-link"></span></a>å¯¹ CAè¯ä¹¦ è¿›è¡Œè½¬æ¢</h3>

<p>OpenSSLäº§ç”Ÿçš„æ•°å­—è¯ä¹¦ä¸åœ¨Javaè¯­è¨€ç¯å¢ƒä¸­ç›´æ¥ä½¿ç”¨ï¼Œéœ€è¦å°†å…¶è½¬åŒ–ä¸ºPKCS#12ç¼–ç æ ¼å¼ã€‚å®Œæ•´å‘½ä»¤ä»£ç æ¸…å•å¦‚ä¸‹ï¼š</p>

<pre><code>ï¼ƒæ ¹è¯ä¹¦è½¬æ¢å‘½ä»¤

openssl pkcs12 -export -cacerts -inkey private/ca.key.pem -in certs/ca.cer -out certs/ca.p12
</code></pre>

<p>å„å‚æ•°çš„å«ä¹‰å¦‚ä¸‹ï¼š</p>

<pre><code>pkcs12      PKCS#12ç¼–ç æ ¼å¼è¯ä¹¦å‘½ä»¤
-export     å¯¼å‡ºè¯ä¹¦
-cacerts    ä»…å¯¼å‡ºCAè¯ä¹¦
-inkey      è¾“å…¥å¯†é’¥ï¼Œè¿™é‡Œä¸ºprivate/ca.key.pem
-in         è¾“å…¥æ–‡ä»¶ï¼Œè¿™é‡Œä¸ºcerts/ca.cer
-out        è¾“å‡ºæ–‡ä»¶ï¼Œè¿™é‡Œä¸ºcerts/ca.p12
</code></pre>

<p>ä¸Šè¿°å‘½ä»¤æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p>

<pre><code>ï¼ƒæ ¹è¯ä¹¦è½¬æ¢

Loading 'screen' into random state - done
Enter pass phrase for private/ca.key.pem:
Enter Export Password:
Verifying - Enter Export Password:
</code></pre>

<p>è¿™æ—¶æˆ‘ä»¬éœ€è¦è¾“å…¥æ ¹è¯ä¹¦å¯†ç <code>www.aios.com</code></p>

<h3>
<a name="%E6%9F%A5%E7%9C%8B%E5%AF%86%E9%92%A5%E5%BA%93%E4%BF%A1%E6%81%AF" class="anchor" href="#%E6%9F%A5%E7%9C%8B%E5%AF%86%E9%92%A5%E5%BA%93%E4%BF%A1%E6%81%AF"><span class="octicon octicon-link"></span></a>æŸ¥çœ‹å¯†é’¥åº“ä¿¡æ¯</h3>

<p>ä¸ªäººä¿¡æ¯äº¤æ¢æ–‡ä»¶ï¼ˆPKCS#12ï¼‰å¯ä»¥ä½œä¸ºå¯†é’¥åº“æˆ–ä¿¡ä»»åº“ä½¿ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡KeyToolæŸ¥çœ‹è¯¥å¯†é’¥åº“çš„è¯¦ç»†ä¿¡æ¯ã€‚å®Œæ•´çš„ä»£ç æ¸…å•å¦‚ä¸‹ï¼š</p>

<pre><code>ï¼ƒæŸ¥çœ‹å¯†é’¥åº“ä¿¡æ¯å‘½ä»¤

keytool -list -keystore certs/ca.p12 -storetype pkcs12 -v -storepass www.aios.com
</code></pre>

<p><g-emoji alias="triangular_flag_on_post" fallback-src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f6a9.png">ğŸš©</g-emoji>keytoolå‘½ä»¤JDKç¯å¢ƒä¸‹æ‰èƒ½ä½¿ç”¨ï¼Œè¿™é‡Œçš„å‚æ•°-storetypeå€¼ä¸ºâ€œpkcs12â€</p>

<h2>
<a name="%E6%9E%84%E5%BB%BA%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AF%81%E4%B9%A6" class="anchor" href="#%E6%9E%84%E5%BB%BA%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AF%81%E4%B9%A6"><span class="octicon octicon-link"></span></a>æ„å»ºæœåŠ¡å™¨è¯ä¹¦</h2>

<p>æœåŠ¡å™¨è¯ä¹¦çš„æ„å»ºä¸æ ¹è¯ä¹¦æ„å»ºç›¸ä¼¼</p>

<h3>
<a name="%E6%9E%84%E5%BB%BA-%E6%9C%8D%E5%8A%A1%E5%99%A8-%E7%A7%81%E9%92%A5" class="anchor" href="#%E6%9E%84%E5%BB%BA-%E6%9C%8D%E5%8A%A1%E5%99%A8-%E7%A7%81%E9%92%A5"><span class="octicon octicon-link"></span></a>æ„å»º æœåŠ¡å™¨ ç§é’¥</h3>

<p>æ„å»ºæœåŠ¡å™¨ç§é’¥ï¼Œå®Œæ•´ä»£ç æ¸…å•å¦‚ä¸‹ï¼š</p>

<pre><code>ï¼ƒæ„å»ºæœåŠ¡å™¨ç§é’¥å‘½ä»¤

openssl genrsa -aes256 -out private/server.key.pem 2048
</code></pre>

<p>å„å‚æ•°çš„å«ä¹‰å¦‚ä¸‹ï¼š</p>

<pre><code>genrsa      äº§ç”ŸRSAå¯†é’¥å‘½ä»¤
-aes256     ä½¿ç”¨AESç®—æ³•ï¼ˆ256ä½å¯†é’¥ï¼‰å¯¹äº§ç”Ÿçš„ç§é’¥åŠ å¯†ã€‚å¯é€‰ç®—æ³•åŒ…æ‹¬DESã€DESedeã€IDEAå’ŒAES
-out        è¾“å‡ºè·¯å¾„ï¼Œè¿™é‡ŒæŒ‡private/server.key.pem
</code></pre>

<p>è¿™é‡Œçš„å‚æ•°2048ï¼ŒæŒ‡RSAå¯†é’¥é•¿åº¦ä½æ•°ï¼Œé»˜è®¤é•¿åº¦ä¸º512ä½
ä¸Šè¿°å‘½ä»¤æ‰§è¡Œç»“æœï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>

<pre><code>ï¼ƒäº§ç”ŸæœåŠ¡å™¨è¯ä¹¦å¯†é’¥

Loading 'screen' into random state - done
Generating RSA private key, 2048 bit long modulus
.......................................+++
....................................................+++
e is 65537 (0x10001)
Enter pass phrase for private/server.key.pem:
Verifying - Enter pass phrase for private/server.key.pem:
</code></pre>

<p>è¿™æ—¶æˆ‘ä»¬éœ€è¦è¾“å…¥æœåŠ¡å™¨è¯ä¹¦å¯†ç "<code>www.thtf.com</code>"</p>

<h3>
<a name="%E7%94%9F%E6%88%90-%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AF%81%E4%B9%A6-%E8%AF%B7%E6%B1%82" class="anchor" href="#%E7%94%9F%E6%88%90-%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AF%81%E4%B9%A6-%E8%AF%B7%E6%B1%82"><span class="octicon octicon-link"></span></a>ç”Ÿæˆ æœåŠ¡å™¨è¯ä¹¦ è¯·æ±‚</h3>

<p>å®ŒæˆæœåŠ¡å™¨è¯ä¹¦çš„å¯†é’¥æ„å»ºåï¼Œæˆ‘ä»¬éœ€è¦äº§ç”ŸæœåŠ¡å™¨è¯ä¹¦çš„ç­¾å‘ç”³è¯·ã€‚å®Œæ•´ä»£ç æ¸…å•å¦‚ä¸‹ï¼š</p>

<pre><code>#ç”ŸæˆæœåŠ¡å™¨è¯ä¹¦ç­¾å‘ç”³è¯·å‘½ä»¤

openssl req -new -key private/server.key.pem -out private/server.csr
</code></pre>

<p>å„å‚æ•°çš„å«ä¹‰å¦‚ä¸‹ï¼š</p>

<pre><code>req         ç”Ÿæˆè¯ä¹¦ç­¾å‘ç”³è¯·å‘½ä»¤
-new        æ–°è¯·æ±‚
-key        å¯†é’¥ï¼Œè¿™é‡Œä¸ºprivate/ca.key.pem
-out        è¾“å‡ºè·¯å¾„ï¼Œè¿™é‡Œä¸ºprivate/ca.csræ–‡ä»¶
</code></pre>

<p>ä¸Šè¿°å‘½ä»¤æ‰§è¡Œç»“æœï¼Œå¦‚ä¸‹</p>

<pre><code>ï¼ƒç”ŸæˆæœåŠ¡å™¨è¯ä¹¦ç­¾å‘ç”³è¯·

Enter pass phrase for private/server.key.pem:
Loading 'screen' into random state - done
You are about to be asked to enter information that will be incorporated into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter '.', the field will be left blank.
-----
Country Name (2 letter code) [AU]:CN
State or Province Name (full name) [Some-State]:BJ
Locality Name (eg, city) []:BJ
Organization Name (eg, company) [Internet Widgits Pty Ltd]:Tech.Settion
Organizational Unit Name (eg, section) []:AIOS Inc.
Common Name (e.g. server FQDN or YOUR name) []:Insight Server
Email Address []:

Please enter the following 'extra' attributes
to be sent with your certificate request
A challenge password []:
An optional company name []:
</code></pre>

<p>è¿™æ—¶æˆ‘ä»¬éœ€è¦è¾“å…¥æœåŠ¡å™¨è¯ä¹¦å¯†ç ï¼ˆâ€œ<code>www.thtf.com</code>"ï¼‰å¹¶å¡«å†™æœåŠ¡å™¨è¯ä¹¦ç›¸å…³ä¿¡æ¯å­—æ®µ</p>

<h3>
<a name="%E7%AD%BE%E5%8F%91-%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AF%81%E4%B9%A6" class="anchor" href="#%E7%AD%BE%E5%8F%91-%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AF%81%E4%B9%A6"><span class="octicon octicon-link"></span></a>ç­¾å‘ æœåŠ¡å™¨è¯ä¹¦</h3>

<p>æˆ‘ä»¬å·²ç»è·å¾—äº†æ ¹è¯ä¹¦ï¼Œå¯ä»¥ä½¿ç”¨æ ¹è¯ä¹¦ç­¾å‘æœåŠ¡å™¨è¯ä¹¦ã€‚å®Œæ•´ä»£ç æ¸…å•å¦‚ä¸‹ï¼š</p>

<pre><code>#ç­¾å‘æœåŠ¡å™¨è¯ä¹¦å‘½ä»¤

openssl x509 -req -days 3650 -sha1 -extensions v3_req -CA certs/ca.cer -CAkey private/ca.key.pem -CAserial ca.srl -CAcreateserial -in private/server.csr -out certs/server.cer
</code></pre>

<p>å„å‚æ•°å¾—å«ä¹‰å¦‚ä¸‹ï¼š</p>

<pre><code>x509                ç­¾å‘X.509æ ¼å¼è¯ä¹¦å‘½ä»¤
-req                è¯ä¹¦è¾“å…¥è¯·æ±‚
-days               æœ‰æ•ˆå¤©æ•°ï¼Œè¿™é‡Œä¸º3650å¤©
-sha1               è¯ä¹¦æ‘˜è¦ç®—æ³•ï¼Œè¿™é‡Œä¸ºSHA1ç®—æ³•
-extensions         æŒ‰OpenSSLé…ç½®æ–‡ä»¶v3_reqé¡¹æ·»åŠ æ‰©å±•
-CA                 CAè¯ä¹¦ï¼Œè¿™é‡Œä¸ºcerts/ca.cer
-CAkey              CAè¯ä¹¦å¯†é’¥ï¼Œè¿™é‡Œä¸ºprivate/ca.key.pem
-CAserial           CAè¯ä¹¦åºåˆ—å·æ–‡ä»¶ï¼Œè¿™é‡Œä¸ºca.srl
-CAcreateserial     åˆ›å»ºCAè¯ä¹¦åºåˆ—å·
-in                 è¾“å…¥æ–‡ä»¶ï¼Œè¿™é‡Œä¸ºprivate/server.csr
-out                è¾“å‡ºæ–‡ä»¶ï¼Œè¿™é‡Œä¸ºcerts/server.cer
</code></pre>

<p>ä¸Šè¿°å‘½ä»¤æ‰§è¡Œç»“æœï¼Œå¦‚ä¸‹ï¼š</p>

<pre><code>ï¼ƒç­¾å‘æœåŠ¡å™¨è¯ä¹¦

Loading 'screen' into random state - done
Signature ok
subject=/C=CN/ST=BJ/L=BJ/O=Tech.Settion/OU=AIOS Inc./CN=Insight Server
Getting CA Private Key
Enter pass phrase for private/ca.key.pem:
</code></pre>

<p>è¿™æ—¶æˆ‘ä»¬éœ€è¦è¾“å…¥æœåŠ¡å™¨è¯ä¹¦å¯†ç "<code>www.thtf.com</code>"</p>

<h3>
<a name="%E5%AF%B9-%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AF%81%E4%B9%A6-%E8%BF%9B%E8%A1%8C%E8%BD%AC%E6%8D%A2" class="anchor" href="#%E5%AF%B9-%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AF%81%E4%B9%A6-%E8%BF%9B%E8%A1%8C%E8%BD%AC%E6%8D%A2"><span class="octicon octicon-link"></span></a>å¯¹ æœåŠ¡å™¨è¯ä¹¦ è¿›è¡Œè½¬æ¢</h3>

<p>è¿™é‡Œæˆ‘ä»¬åŒæ ·è¦å°†OpenSSLäº§ç”Ÿå¾—æ•°å­—è¯ä¹¦è½¬åŒ–ä¸ºPKCS#12ç¼–ç æ ¼å¼ã€‚å®Œæ•´å‘½ä»¤ä»£ç å¦‚ä¸‹ï¼š</p>

<pre><code>#æœåŠ¡å™¨è¯ä¹¦è½¬æ¢å‘½ä»¤

openssl pkcs12 -export -clcerts -inkey private/server.key.pem -in certs/server.cer -out certs/server.p12
</code></pre>

<p>å„å‚æ•°å¾—</p>

<pre><code>pkcs12      PKCS#12ç¼–ç æ ¼å¼è¯ä¹¦å‘½ä»¤ 
-export     å¯¼å‡ºè¯ä¹¦
-clcerts    ä»…å¯¼å‡ºå®¢æˆ·è¯ä¹¦
-inkey      è¾“å…¥å¯†é’¥è·¯å¾„
-in         è¾“å…¥æ–‡ä»¶è·¯å¾„
-out        è¾“å‡ºæ–‡ä»¶è·¯å¾„ï¼Œè¿™é‡Œä¸ºcerts/server.p12
</code></pre>

<p>ä¸Šè¿°å‘½ä»¤æ‰§è¡Œç»“æœå¦‚ä¸‹</p>

<pre><code>ï¼ƒæœåŠ¡å™¨è½¬æ¢è¯ä¹¦

Loading 'screen' into random state - done
Enter pass phrase for private/server.key.pem:
Enter Export Password:
Verifying - Enter Export Password:
</code></pre>

<p>æˆ‘ä»¬éœ€è¦è¾“å…¥æœåŠ¡å™¨è¯ä¹¦å¯†ç "<code>www.thtf.com</code>"</p>

<h2>
<a name="%E6%9E%84%E5%BB%BA%E5%AE%A2%E6%88%B7%E8%AF%81%E4%B9%A6" class="anchor" href="#%E6%9E%84%E5%BB%BA%E5%AE%A2%E6%88%B7%E8%AF%81%E4%B9%A6"><span class="octicon octicon-link"></span></a>æ„å»ºå®¢æˆ·è¯ä¹¦</h2>

<p>å®¢æˆ·è¯ä¹¦çš„æ„å»ºä¸æœåŠ¡å™¨è¯ä¹¦å¾—æ„å»ºåŸºæœ¬ä¸€è‡´</p>

<h3>
<a name="%E6%9E%84%E5%BB%BA-%E5%AE%A2%E6%88%B7-%E7%A7%81%E9%92%A5" class="anchor" href="#%E6%9E%84%E5%BB%BA-%E5%AE%A2%E6%88%B7-%E7%A7%81%E9%92%A5"><span class="octicon octicon-link"></span></a>æ„å»º å®¢æˆ· ç§é’¥</h3>

<p>æ„å»ºå®¢æˆ·ç§é’¥ï¼Œå®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</p>

<pre><code>ï¼ƒäº§ç”Ÿå®¢æˆ·ç§é’¥å‘½ä»¤

openssl genrsa -aes256 -out private/800010000010007.key.pem 2048
</code></pre>

<p>å„å‚æ•°å¾—å«ä¹‰å¦‚ä¸‹ï¼š</p>

<pre><code>genrsa      äº§ç”ŸRSAå¯†é’¥å‘½ä»¤
-aes256     ä½¿ç”¨AESç®—æ³•ï¼ˆ256ä½å¯†é’¥ï¼‰å¯¹äº§ç”Ÿå¾—ç§é’¥åŠ å¯†ã€‚å¯é€‰ç®—æ³•åŒ…æ‹¬DESã€DESedeã€IDEAå’ŒAESã€‚
-out        è¾“å‡ºè·¯å¾„ï¼Œè¿™é‡ŒæŒ‡private/800010000010007.key.pem 2048
</code></pre>

<p>è¿™é‡Œå¾—å‚æ•°2048ï¼ŒæŒ‡RSAå¯†é’¥é•¿åº¦ä½æ•°ï¼Œé»˜è®¤é•¿åº¦ä¸º512ä½<br>
ä¸Šè¿°å‘½ä»¤æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p>

<pre><code>ï¼ƒäº§ç”Ÿå®¢æˆ·å¯†é’¥

Loading 'screen' into random state - done
Generating RSA private key, 2048 bit long modulus
..........................+++
....................+++
e is 65537 (0x10001)
Enter pass phrase for private/800010000010007.key.pem:
Verifying - Enter pass phrase for private/800010000010007.key.pem:
</code></pre>

<p>è¿™æ—¶æˆ‘ä»¬éœ€è¦è¾“å…¥å®¢æˆ·è¯ä¹¦å¾—å¯†ç â€œ<code>www.test.com</code>â€</p>

<h3>
<a name="%E7%94%9F%E6%88%90-%E5%AE%A2%E6%88%B7%E8%AF%81%E4%B9%A6-%E8%AF%B7%E6%B1%82" class="anchor" href="#%E7%94%9F%E6%88%90-%E5%AE%A2%E6%88%B7%E8%AF%81%E4%B9%A6-%E8%AF%B7%E6%B1%82"><span class="octicon octicon-link"></span></a>ç”Ÿæˆ å®¢æˆ·è¯ä¹¦ è¯·æ±‚</h3>

<p>å®Œæˆå®¢æˆ·è¯ä¹¦å¯†é’¥æ„å»ºåï¼Œæˆ‘ä»¬éœ€è¦äº§ç”Ÿå®¢æˆ·è¯ä¹¦ç­¾å‘ç”³è¯·ã€‚å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</p>

<pre><code>ï¼ƒç”Ÿæˆå®¢æˆ·è¯ä¹¦ç­¾å‘ç”³è¯·å‘½ä»¤

openssl req -new -key private/800010000010007.key.pem -out private/800010000010007.csr
</code></pre>

<p>å„å‚æ•°å¾—å«ä¹‰å¦‚ä¸‹ï¼š</p>

<pre><code>req         äº§ç”Ÿè¯ä¹¦ç­¾å‘ç”³è¯·å‘½ä»¤
-new        æ–°è¯·æ±‚
-key        å¯†é’¥ï¼Œè¿™é‡Œä¸ºprivate/800010000010007.key.pem
-out        è¾“å‡ºè·¯å¾„ï¼Œè¿™é‡Œä¸ºprivate/800010000010007.csr
</code></pre>

<p>ä¸Šè¿°å‘½ä»¤æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p>

<pre><code>ï¼ƒç”Ÿæˆå®¢æˆ·è¯ä¹¦ç­¾å‘ç”³è¯·

Enter pass phrase for private/800010000010007.key.pem:
Loading 'screen' into random state - done
You are about to be asked to enter information that will be incorporated into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter '.', the field will be left blank.
-----
Country Name (2 letter code) [AU]:CN
State or Province Name (full name) [Some-State]:BJ
Locality Name (eg, city) []:BJ
Organization Name (eg, company) [Internet Widgits Pty Ltd]:Tech.Settion
Organizational Unit Name (eg, section) []:Test Merchant
Common Name (e.g. server FQDN or YOUR name) []:800010000010007
Email Address []:

Please enter the following 'extra' attributes
to be sent with your certificate request
A challenge password []:
An optional company name []:
</code></pre>

<p>è¿™æ—¶æˆ‘ä»¬éœ€è¦è¾“å…¥å®¢æˆ·è¯ä¹¦å¾—å¯†ç â€œ<code>www.test.com</code>â€å’Œå®¢æˆ·ç›¸å…³ä¿¡æ¯</p>

<h3>
<a name="%E7%AD%BE%E5%8F%91-%E5%AE%A2%E6%88%B7%E8%AF%81%E4%B9%A6" class="anchor" href="#%E7%AD%BE%E5%8F%91-%E5%AE%A2%E6%88%B7%E8%AF%81%E4%B9%A6"><span class="octicon octicon-link"></span></a>ç­¾å‘ å®¢æˆ·è¯ä¹¦</h3>

<p>æˆ‘ä»¬å·²ç»è·å¾—äº†æ ¹è¯ä¹¦ï¼Œå¯ä»¥ä½¿ç”¨æ ¹è¯ä¹¦ç­¾å‘å®¢æˆ·è¯ä¹¦ï¼ˆ<code>800010000010007.cer</code>ï¼‰ã€‚å®Œæ•´ä»£ç æ¸…å•å¦‚ä¸‹ï¼š</p>

<pre><code>ï¼ƒç­¾å‘å®¢æˆ·è¯ä¹¦å‘½ä»¤

openssl ca -days 3650 -in private/800010000010007.csr -out certs/800010000010007.cer -cert certs/ca.cer -keyfile private/ca.key.pem
</code></pre>

<p>å„å‚æ•°å¾—å«ä¹‰å¦‚ä¸‹ï¼š</p>

<pre><code>ca          ç­¾å‘è¯ä¹¦å‘½ä»¤
-days       è¯ä¹¦æœ‰æ•ˆæœŸï¼Œè¿™é‡Œä¸º3650å¤©
-in         è¾“å…¥æ–‡ä»¶ï¼Œè¿™é‡Œä¸ºprivate/800010000010007.csr
-out        è¾“å‡ºæ–‡ä»¶ï¼Œè¿™é‡Œä¸ºcerts/800010000010007.cer
-cert       è¯ä¹¦æ–‡ä»¶ï¼Œè¿™é‡Œä¸ºcerts/ca.cer
-keyfile    æ ¹è¯ä¹¦å¯†é’¥æ–‡ä»¶ï¼Œè¿™é‡Œä¸ºprivate/ca.key.pem
</code></pre>

<p>ä¸Šè¿°å‘½ä»¤æ‰§è¡Œç»“æœï¼Œå¦‚ä¸‹ï¼š</p>

<pre><code>ï¼ƒç­¾å‘å®¢æˆ·è¯ä¹¦

Using configuration from C:\OpenSSL-Win64\bin\openssl.cfg
Loading 'screen' into random state - done
Enter pass phrase for private/ca.key.pem:
Check that the request matches the signature
Signature ok
Certificate Details:
        Serial Number: 1 (0x1)
        Validity
            Not Before: Sep 17 08:17:33 2014 GMT
            Not After : Sep 14 08:17:33 2024 GMT
        Subject:
            countryName               = CN
            stateOrProvinceName       = BJ
            organizationName          = Tech.Settion
            organizationalUnitName    = Test Merchant
            commonName                = 800010000010007
        X509v3 extensions:
            X509v3 Basic Constraints:
                CA:FALSE
            Netscape Comment:
                OpenSSL Generated Certificate
            X509v3 Subject Key Identifier:
                24:8B:78:66:97:35:0C:B2:A7:F3:EE:21:C2:94:AA:84:32:EC:3D:B8
            X509v3 Authority Key Identifier:
                DirName:/C=CN/ST=BJ/L=BJ/O=Tech.Settion/OU=AIOS Inc./CN=Insight RootCA
                serial:FC:34:82:77:F4:3F:54:26

Certificate is to be certified until Sep 14 08:17:33 2024 GMT (3650 days)
Sign the certificate? [y/n]:y


1 out of 1 certificate requests certified, commit? [y/n]y
Write out database with 1 new entries
Data Base Updated
</code></pre>

<p>è¿™æ—¶æˆ‘ä»¬éœ€è¦è¾“å…¥å®¢æˆ·è¯ä¹¦å¯†ç â€œ<code>www.test.com</code>â€,å¹¶åŒæ„ç­¾å‘è¯ä¹¦</p>

<h3>
<a name="%E5%AF%B9-%E5%AE%A2%E6%88%B7%E8%AF%81%E4%B9%A6-%E8%BF%9B%E8%A1%8C%E8%BD%AC%E6%8D%A2" class="anchor" href="#%E5%AF%B9-%E5%AE%A2%E6%88%B7%E8%AF%81%E4%B9%A6-%E8%BF%9B%E8%A1%8C%E8%BD%AC%E6%8D%A2"><span class="octicon octicon-link"></span></a>å¯¹ å®¢æˆ·è¯ä¹¦ è¿›è¡Œè½¬æ¢</h3>

<p>æœ€åæˆ‘ä»¬éœ€è¦å°†è·å¾—çš„å®¢æˆ·è¯ä¹¦è½¬åŒ–Javaè¯­è¨€å¯ä»¥è¯†åˆ«å¾—PKCS#12ç¼–ç æ ¼å¼ã€‚å®Œæ•´å‘½ä»¤å¦‚ä¸‹</p>

<pre><code>ï¼ƒå®¢æˆ·è¯ä¹¦è½¬æ¢å‘½ä»¤

openssl pkcs12 -export -clcerts -inkey private/800010000010007.key.pem -in certs/800010000010007.cer -out certs/800010000010007.p12
</code></pre>

<p>å„å‚æ•°å¾—å«ä¹‰å¦‚ä¸‹</p>

<pre><code>pkcs12          PKCS#12ç¼–ç æ ¼å¼è¯ä¹¦å‘½ä»¤
-export         å¯¼å‡ºè¯ä¹¦
-clcerts        ä»…å¯¼å‡ºå®¢æˆ·è¯ä¹¦
-inkey          è¾“å…¥å¯†é’¥ï¼Œè¿™é‡Œä¸ºprivate/800010000010007.key.pem
-in             è¾“å…¥æ–‡ä»¶ï¼Œè¿™é‡Œä¸ºcerts/800010000010007.cer
-out            è¾“å‡ºæ–‡ä»¶ï¼Œè¿™é‡Œä¸ºcerts/800010000010007.p12
</code></pre>

<p>ä¸Šè¿°å‘½ä»¤æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p>

<pre><code>ï¼ƒå®¢æˆ·è¯ä¹¦è½¬æ¢

Loading 'screen' into random state - done
Enter pass phrase for private/800010000010007.key.pem:
Enter Export Password:
Verifying - Enter Export Password:
</code></pre>

<p>è¿™æ—¶æˆ‘ä»¬éœ€è¦è¾“å…¥å®¢æˆ·è¯ä¹¦å¯†ç â€œ<code>www.test.com</code>â€<br>
è‡³æ­¤ï¼Œæˆ‘ä»¬å®Œæˆäº†åŒå‘è®¤è¯å¾—æ‰€éœ€å…¨éƒ¨è¯ä¹¦ã€‚</p>
      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>